<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Webdata</title>

<script src="6-webdata_files/header-attrs-2.23/header-attrs.js"></script>
<script src="6-webdata_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="6-webdata_files/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="6-webdata_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="6-webdata_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="6-webdata_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="6-webdata_files/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="6-webdata_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="6-webdata_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="6-webdata_files/navigation-1.1/tabsets.js"></script>
<link href="6-webdata_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="6-webdata_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="custom.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Webdata</h1>
<h3 class="subtitle">Working with xpath and regex</h3>

</div>


<hr />
<p>After our last session where we learned how to connect R to a
database and query it, today’s session will focus on webdata and regular
expressions. First, we will use R to inspect and locate elements in html
and xml structures using xpath. Then, we will quickly look at
<code>stringr</code> and wrap up with regular expressions.</p>
<p>Both xpath and regular expressions are extremely useful when it comes
to webdata. Locating data in nested html structures is particularly
useful when it comes to scraping, our next session.</p>
<p>Regular expressions are handy whenever manipulating strings and will
serve you well in many situations. In the context of webdata, they can
be particularly useful when handling the type of uncleaned data we get
after we scraped the internet and need to extract specific information
or just tidy up our results.</p>
<div id="html-structure" class="section level1">
<h1>HTML structure 🌳</h1>
<p>HTML is the standard markup language for creating Web pages. It is
thus important to understand the basic structure of html documents to be
able to scrape particular parts of a website. HTML describes the
structure of a Web page and consists of a series of elements. Elements
tell the browser how to display the content, for example they label
pieces of content such as “this is a heading”, “this is a paragraph”,
“this is a link”, etc.</p>
<p>Here is an example of a document object model (DOM). Notice how the
there is a cascading structure of html nodes.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span> </span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="kw">&lt;html&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="kw">&lt;head&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>      <span class="kw">&lt;title</span> <span class="er">id</span><span class="ot">=</span><span class="st">1</span><span class="kw">&gt;</span>First HTML<span class="kw">&lt;/title&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="kw">&lt;/head&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>      <span class="kw">&lt;div&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>          <span class="kw">&lt;h1&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>            I am your first HTML file!</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>          <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>      <span class="kw">&lt;/div&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>The <code>&lt;!DOCTYPE html&gt;</code> declaration defines that this
document is an HTML5 document. The <code>&lt;html&gt;</code> element is
the root element of an HTML page. The <code>&lt;head&gt;</code> element
contains meta information about the HTML page. The
<code>&lt;title&gt;</code> element specifies a title for the HTML page
(which is shown in the browser’s title bar or in the page’s tab). The
<code>&lt;body&gt;</code> element defines the document’s body, and is a
container for all the visible contents, such as headings, paragraphs,
images, hyperlinks, tables, lists, etc. The <code>&lt;h1&gt;</code>
element defines a large heading.</p>
<div id="developer-tools" class="section level2">
<h2>Developer Tools 🏄</h2>
<p>While we can use R to inspect the parsed document, it is much easier
to do this part in the browser. To do so, we right click anywhere on the
website and click on “Inspect”. On Windows, you can also simply press
F12.</p>
<p><img src="pics/inspect.png" width="90%" style="display: block; margin: auto;" /></p>
<p>This opens up the developer tools interface on your browser. For our
purposes, the most important tab in the developer tools is the
“Elements” tab. This tab shows you the source code of the webpage in an
interactive manner. Now, when we hover over the elements in the tab they
will be highlighted on the webpage. By clicking the mouse icon on the
top left, we can reverse this behaviour.</p>
</div>
<div id="parsing-with-r" class="section level2">
<h2>Parsing with R</h2>
<p>Now let’s have a look at how to do this in R:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>You’ll learn more about <code>rvest</code> in next week’s session.
For now, just remember that parsing a website in R is
straightforward:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>parsed_doc <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;http://www.r-datacollection.com/materials/ch-4-xpath/fortunes/fortunes.html&quot;</span>) </span></code></pre></div>
</div>
</div>
<div id="xpath-basics" class="section level1">
<h1>Xpath Basics 👩‍💻</h1>
<p>While HTML displays data and describes the structure of a webpage,
XML stores and transfers data. XML is a standard language which can
define other computer languages. XPath uses path expressions to select
nodes or node-sets in an XML document. HTML and Xpath can thus be
exploited in conjunction to programmtically interact with the stored
HTML structure of a website.</p>
<p>A simple xpath in the example mentioned above would be
<code>html/body/div/h1</code>. The simple slashes in this example
indicate an <strong>absolute path</strong>. This means, we start at the
root node and follow the whole way down to our target element h1.</p>
<p><strong>Relative paths</strong> on the other hand are indicated with
double slashes <code>//</code>. Relative paths skip nodes and do not
need to start at the root node. An example here would be
<code>//body//h1</code>.</p>
<p>The wildcard operator <code>*</code> allows us to skip elements in
the xpath.</p>
<p>After having parsed the webiste from HTML to an XML document, we can
locate individual elements with xpaths. The <code>html_elements()</code>
function from the <code>rvest</code> package, finds and selects elements
in the parsed document. We can use both css and xpath selectors, but for
now we will only look at xpath selectors.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">html_elements</span>(parsed_doc, <span class="at">xpath =</span> <span class="st">&quot;/html/body/div/p/i&quot;</span>)</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;i&gt;&#39;What we have is nice, but we need something very different&#39;&lt;/i&gt;
## [2] &lt;i&gt;&#39;R is wonderful, but it cannot work magic&#39;&lt;/i&gt;</code></pre>
<div id="the-xpath-grammar" class="section level2">
<h2>The xpath grammar 🧙</h2>
<p>We can use xpath to select certain aspects of the webpage, or more
precisely the underlying XML from the html file.</p>
<p><img src="pics/Xpath.png" width="90%" style="display: block; margin: auto;" /></p>
<ul>
<li><code>//</code>: The releative path that lets us start with our
current element</li>
<li>tagname: the tagname of our current element</li>
<li><code>@</code>: The <code>@</code> is used to select an attribute in
out element.</li>
<li>Attribute: The name of our attribute.</li>
<li>Value: The value of our attribute</li>
</ul>
</div>
<div id="xpath-predicates" class="section level2">
<h2>XPath Predicates</h2>
<p>Now let’s take a look at some more complex examples of xpaths.
Elements on the webpage can also be selected with xpath by leveraging
their relations to the elements that they are connected to. The basic
syntax for this is <code>element1/relation::element2</code>.</p>
<p>If we would like to extract the two names on our example webpage,
using element relations, we can do so like this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">html_elements</span>(parsed_doc, <span class="at">xpath =</span> <span class="st">&quot;//p/preceding-sibling::h1&quot;</span>)</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;h1&gt;Robert Gentleman&lt;/h1&gt;
## [2] &lt;h1&gt;Rolf Turner&lt;/h1&gt;</code></pre>
<p>Finally, we can also use True/False conditions on our elements to
filter them. In xpath, this is called <strong>predicates</strong>. A
<strong>numeric predicate</strong> lets us select the nth element within
a given path. Let us use this to extract the Source of the quotes on our
example page:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">html_elements</span>(parsed_doc, <span class="at">xpath =</span> <span class="st">&quot;//p[2]&quot;</span>)</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;p&gt;&lt;b&gt;Source: &lt;/b&gt;Statistical Computing 2003, Reisensburg&lt;/p&gt;
## [2] &lt;p&gt;&lt;b&gt;Source: &lt;/b&gt;&lt;a href=&quot;https://stat.ethz.ch/mailman/listinfo/r-help&quot;&gt; ...</code></pre>
<p>Next to numeric predicates, there are also <strong>textual
predicates</strong>. Textual predicates allow us to do rudimentary text
matching. This is implemented in string functions like
<code>contains()</code>, <code>starts_with</code> or
<code>ends_with()</code>. Predicates can also be chained together with
<code>and</code>. Multiple xpaths can be combined in an or logic with
the pipe operator <code>|</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">html_elements</span>(parsed_doc, <span class="at">xpath =</span> <span class="st">&quot;//h1[contains(., &#39;Rolf&#39;)] | //h1[contains(., &#39;Robert&#39;)]&quot;</span> )</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;h1&gt;Robert Gentleman&lt;/h1&gt;
## [2] &lt;h1&gt;Rolf Turner&lt;/h1&gt;</code></pre>
</div>
<div id="xpath-exercise" class="section level2">
<h2>Xpath exercise ⛏`</h2>
<p>Can you find all links in on our example document?</p>
<hr />
</div>
</div>
<div id="strings-with-stringr" class="section level1">
<h1>Strings with <code>stringr</code> 💬</h1>
<p><code>stringr</code> and <code>stringi</code> are the two most common
libraries for string manipulation in R. Before we look into regular
expressions, let us quickly look into some of th core functionalities of
<code>stringr</code> and how you can use them.</p>
<p>Here is a quick overview of the most useful functions in the
<code>stringr</code> package:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">str_detect</span>(x, <span class="st">&quot;e&quot;</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE</code></pre>
<p>To extract the actual text of a match, use
<code>str_extract()</code>. Note that <code>str_extract()</code> only
extracts the first match. To get all matches, use
<code>str_extract_all()</code>, which returns a list.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">str_extract_all</span>(x, <span class="st">&#39;a&#39;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;a&quot;
## 
## [[2]]
## [1] &quot;a&quot; &quot;a&quot; &quot;a&quot;
## 
## [[3]]
## [1] &quot;a&quot;</code></pre>
<p><code>str_replace()</code> and <code>str_replace_all()</code> allow
you to replace matches with new strings. The simplest way is to replace
a fixed string, however with <code>str_replace_all()</code> you can
perform multiple replacements by supplying a named vector:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">str_replace_all</span>(x, <span class="fu">c</span>(<span class="st">&quot;a&quot;</span> <span class="ot">=</span> <span class="st">&quot;A&quot;</span>, <span class="st">&quot;b&quot;</span> <span class="ot">=</span> <span class="st">&quot;B&quot;</span>, <span class="st">&quot;p&quot;</span> <span class="ot">=</span> <span class="st">&quot;P&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;APPle&quot;  &quot;BAnAnA&quot; &quot;PeAr&quot;</code></pre>
<p><code>str_locate()</code> and <code>str_locate_all()</code> give you
the starting and ending positions of each match. These are particularly
useful when none of the other functions does exactly what you want.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">str_locate_all</span>(x, <span class="st">&#39;a&#39;</span>)</span></code></pre></div>
<pre><code>## [[1]]
##      start end
## [1,]     1   1
## 
## [[2]]
##      start end
## [1,]     2   2
## [2,]     4   4
## [3,]     6   6
## 
## [[3]]
##      start end
## [1,]     3   3</code></pre>
</div>
<div id="regular-expressions" class="section level1">
<h1>Regular expressions 📝</h1>
<p><img src="pics/xkcd_regex.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Regular expressions (Regex) allow us to manipulate strings based on
pattern matching. Regex patterns specify a sequence of strings, either
explicitly or by meta characters. While they can be a hard nut to crack,
they are extremely useful.</p>
<p>Meta characters allow us to abstract from explicit patterns. These
meta characters are <code>. \ | ( ) [ { ^ $ * + ?</code>. For example,
<code>.</code> is called a wildcard, as it matches any character, except
for line breaks (<code>\n</code>).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;a.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;ap&gt;ple
## [2] │ b&lt;an&gt;&lt;an&gt;a
## [3] │ pe&lt;ar&gt;</code></pre>
<div id="quantifiers" class="section level2">
<h2>Quantifiers *️⃣</h2>
<p><code>? * + {n} {n,} {n,m}</code> are so-called <em>quantifiers</em>,
that allow us to match the preceding character either zero or one
<code>?</code>, zero or more <code>*</code>, or one or more
<code>+</code> times. <code>{n}</code> allows us to match a pattern
exactly n times. To match n times and more, we add a comma in the curly
brackets <code>{n,}</code> and to match between n and m times, we use
<code>{n,m}</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;p?&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;&gt;a&lt;p&gt;&lt;p&gt;&lt;&gt;l&lt;&gt;e&lt;&gt;
## [2] │ &lt;&gt;b&lt;&gt;a&lt;&gt;n&lt;&gt;a&lt;&gt;n&lt;&gt;a&lt;&gt;
## [3] │ &lt;p&gt;&lt;&gt;e&lt;&gt;a&lt;&gt;r&lt;&gt;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;p*&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;&gt;a&lt;pp&gt;&lt;&gt;l&lt;&gt;e&lt;&gt;
## [2] │ &lt;&gt;b&lt;&gt;a&lt;&gt;n&lt;&gt;a&lt;&gt;n&lt;&gt;a&lt;&gt;
## [3] │ &lt;p&gt;&lt;&gt;e&lt;&gt;a&lt;&gt;r&lt;&gt;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;p+&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ a&lt;pp&gt;le
## [3] │ &lt;p&gt;ear</code></pre>
<p>We can also match for specific <em>character classes</em>: If you
would like to match whitespaces (spaces, linebreaks, tabs) you can use
<code>\\s</code>. To match any digit, simply use <code>\\d</code>, for
word character (digits and alphabetic characters) you can use
<code>\\w</code>. We can negate those character classes by using them in
uppercase (e.g. <code>\\D</code> matching all non-digits).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="st">&quot;1. A small sentence. - 2. Another tiny sentence.&quot;</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="fu">str_view</span>(y, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s(</span><span class="sc">\\</span><span class="st">w{4,5})</span><span class="sc">\\</span><span class="st">s&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ 1. A&lt; small &gt;sentence. - 2. Another&lt; tiny &gt;sentence.</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">str_view</span>(y, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">W&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;1.&gt; A small sentence. - &lt;2.&gt; Another tiny sentence.</code></pre>
<p>R’s regex implmentation also ships with a number of predefined
character classes, like <code>[:upper:]</code>, <code>[:lower:]</code>
and <code>[:punct:]</code>. They are usually simpler and much easier to
remember than corresponding regex patterns. Note however, that these
will require double squared brackets in many of the base R
functions.</p>
</div>
<div id="anchors-alternates" class="section level2">
<h2>Anchors &amp; alternates ⚓</h2>
<p>Next to character classes and quantifiers, <em>anchors</em> match the
start <code>^</code> or end <code>$</code> of a string.
<em>Alternates</em> allow us to handle multiple cases in our pattern. As
in R <code>|</code>, is equivalent to an “or”. With <code>[qwert]</code>
we are creating a “one of” pattern that matches any of the strings in
the squared brackets. To negate this and get “anything but” we use
<code>[^qwert]</code>. Parenthesis in regex are used to create groups
and establish an order of evaluation.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;^(a|b)&quot;</span>)</span></code></pre></div>
<pre><code>## [1] │ &lt;a&gt;pple
## [2] │ &lt;b&gt;anana</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;pear&quot;</span>)</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>fruit_match <span class="ot">&lt;-</span> <span class="fu">str_c</span>(fruits, <span class="at">collapse =</span> <span class="st">&quot;|&quot;</span>)</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="fu">str_subset</span>(stringr<span class="sc">::</span>sentences, fruit_match) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;The pearl was worn in a thin silver ring.&quot;
## [2] &quot;The fruit of a fig tree is apple shaped.&quot; 
## [3] &quot;Canned pears lack full flavor.&quot;</code></pre>
<p>At this point you may be wondering to yourself, how we match those
characters that are used as meta characters in regex. This is where it
gets complicated. Theoretically, we only use <code>\</code> as an escape
character. However, we also use regular characters, like <code>\d</code>
for instance, to match digits or <code>\s</code> to match white spaces.
Therefore, we add another backward slash to escape the meta character
<code>\\</code>. To match a question mark, we would use
<code>\\?</code>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;abc?defg&#39;</span>, <span class="st">&#39;123456?89&#39;</span>, <span class="st">&quot;[?.{!]</span><span class="sc">\\</span><span class="st">&quot;</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="fu">str_view</span>(z, <span class="st">&#39;</span><span class="sc">\\</span><span class="st">?&#39;</span>)</span></code></pre></div>
<pre><code>## [1] │ abc&lt;?&gt;defg
## [2] │ 123456&lt;?&gt;89
## [3] │ [&lt;?&gt;.{!]\</code></pre>
<p>For more info on regex in R, check out the documentation:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>?base<span class="sc">::</span>regex</span></code></pre></div>
<p>The stringr package also provides a <a
href="https://stringr.tidyverse.org/articles/regular-expressions.html">vignette</a>
on working with regex.</p>
<p>Finally a word of caution at the end: Since regular expressions are
extremely powerful in string manipulation, it is easy to try and solve
every problem with a single regex. Do not forget that you have other
tools available in a programming language and you can break down the
problem by writing a series of simpler regexes.</p>
</div>
</div>
<div id="regex-exercises" class="section level1">
<h1>Regex exercises 🔧</h1>
<ol style="list-style-type: decimal">
<li><p>Can you explain what these regular expressions match?</p>
<ol style="list-style-type: lower-alpha">
<li><code>"\\$[0-9]+"</code></li>
<li><code>"^.*$"</code></li>
<li><code>"\\d{4}-\\d{2}-\\d{2}"</code></li>
<li><code>".*?\\.txt$"</code></li>
<li><code>"\\\\{4}"</code></li>
<li><code>"b[a-z]{1,4}"</code></li>
</ol></li>
</ol>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co"># Example</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>  <span class="at">string =</span> <span class="fu">c</span>(</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>    <span class="st">&quot;$10 for two items!&quot;</span>,</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>    <span class="st">&quot;Buy the latest iPhone for $899!&quot;</span>,</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    <span class="st">&quot;It costs just $15 per month to upgrade your phone plan.&quot;</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a>    ), </span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">$[0-9]+&quot;</span> <span class="co"># Answer: this regex describes prices in dollars</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>  ) </span></code></pre></div>
<pre><code>## [1] │ &lt;$10&gt; for two items!
## [2] │ Buy the latest iPhone for &lt;$899&gt;!
## [3] │ It costs just &lt;$15&gt; per month to upgrade your phone plan.</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>How many words are there in <code>stringr::words</code> that end
with a “y” and are exactly 3 characers long?</p></li>
<li><p>Now, try to find all words that end with “-ed” but not with
“eed”!</p></li>
<li><p>Let us now write a pattern that matches both emails in the vector
below.</p></li>
</ol>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a>emails <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;456123@students.hertie-school.org&#39;</span>, <span class="st">&#39;h.simpson@students.hertie-school.org&#39;</span>)</span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Now try to extract all names and corresponding phone numbers from
the string below.</li>
</ol>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>ex_string <span class="ot">&lt;-</span> <span class="st">&quot;555-1239Moe Szyslak(636) 555-0113Burns, C. Montgomery555-6542Rev. Timothy Lovejoy555 8904Ned Flanders636-555-3226Simpson, Homer5553642Dr. Julius Hibbert&quot;</span></span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>The following code hides a secret message. Crack it with R and
regular expressions. Once you have cracked it, try to collapse the
solution in one single string. <em>Hint: Some of the characters are more
revealing than others!</em></li>
</ol>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a>secret <span class="ot">&lt;-</span> <span class="st">&quot;clcopCow1zmstc0d87wnkig7OvdicpNuggvhryn92Gjuwczi8hqrfpRxs5Aj5dwpn0TanwoUwisdij7Lj8kpf03AT5Idr3coc0bt7yczjatOaootj55t3Nj3ne6c4Sfek.r1w1YwwojigOd6vrfUrbz2.2bkSnbhzgv4O9i05zLcropwVgnbEqoD65fa1otf.b7wIm24k6t3s9zqe5fy89n6Td5t9kc4f905gmc4gxo5nhk!gr&quot;</span></span></code></pre></div>
</div>
<div id="sources" class="section level1">
<h1>Sources</h1>
<p>This tutorial drew heavily on Simon Munzert’s book <a
href="http://r-datacollection.com/">Automated Data Collection with R</a>
and related <a
href="https://github.com/simonmunzert/web-scraping-with-r-extended-edition">course
materials</a>. For the regex part, we used examples from the string
manipulation section in Hadley Wickham’ s <a
href="https://r4ds.had.co.nz/strings.html">R for Data Science</a>
book.</p>
</div>
<div id="appendix" class="section level1">
<h1>Appendix</h1>
<p>Here’s a reference guide for regex expressions:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="co"># create example</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>example.obj <span class="ot">&lt;-</span> <span class="st">&quot;1. A small sentence. - 2. Another tiny sentence.&quot;</span></span></code></pre></div>
<div id="wildcard-." class="section level3">
<h3>Wildcard <code>.</code></h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;sm.ll&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;small&quot;</code></pre>
</div>
<div id="character-class" class="section level3">
<h3>Character class</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;sm[abc]ll&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;small&quot;</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="co"># range</span></span>
<span id="cb49-2"><a href="#cb49-2" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;sm[a-p]ll&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;small&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="co"># additional characters</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;[uvw. ]&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;.&quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;.&quot; &quot; &quot; &quot; &quot; &quot;.&quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;.&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="co"># pre-defined character classes</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;[:punct:]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;.&quot; &quot;.&quot; &quot;-&quot; &quot;.&quot; &quot;.&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;[[:punct:]ABC]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;.&quot; &quot;A&quot; &quot;.&quot; &quot;-&quot; &quot;.&quot; &quot;A&quot; &quot;.&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;[^[:alnum:]]&quot;</span>))</span></code></pre></div>
<pre><code>##  [1] &quot;.&quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;.&quot; &quot; &quot; &quot;-&quot; &quot; &quot; &quot;.&quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;.&quot;</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a><span class="co"># additional shortcuts</span></span>
<span id="cb59-2"><a href="#cb59-2" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w+&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;        &quot;A&quot;        &quot;small&quot;    &quot;sentence&quot; &quot;2&quot;        &quot;Another&quot;  &quot;tiny&quot;    
## [8] &quot;sentence&quot;</code></pre>
</div>
<div id="word-edges" class="section level3">
<h3>Word edges</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;e</span><span class="sc">\\</span><span class="st">b&quot;</span>)) </span></code></pre></div>
<pre><code>## [1] &quot;e&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;e</span><span class="sc">\\</span><span class="st">B&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;e&quot; &quot;e&quot; &quot;e&quot; &quot;e&quot; &quot;e&quot;</code></pre>
</div>
<div id="quantifiers-1" class="section level3">
<h3>Quantifiers</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;s[:alpha:][:alpha:][:alpha:]l&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;small&quot;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;s[:alpha:]{3}l&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;small&quot;</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;A.+sentence&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A small sentence. - 2. Another tiny sentence&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a><span class="co"># greedy quantification</span></span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;A.+sentence&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A small sentence. - 2. Another tiny sentence&quot;</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;A.+?sentence&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A small sentence&quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a><span class="co"># quantifier with pattern sequence</span></span>
<span id="cb75-2"><a href="#cb75-2" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;(.en){1,5}&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;senten&quot; &quot;senten&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;.en{1,5}&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;sen&quot; &quot;ten&quot; &quot;sen&quot; &quot;ten&quot;</code></pre>
</div>
<div id="meta-characters" class="section level3">
<h3>Meta characters</h3>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot;</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="fu">fixed</span>(<span class="st">&quot;.&quot;</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;.&quot; &quot;.&quot; &quot;.&quot; &quot;.&quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="co"># meta characters in character classes</span></span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;[1-2]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">str_extract_all</span>(example.obj, <span class="st">&quot;[12-]&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;-&quot; &quot;2&quot;</code></pre>
</div>
<div id="backreferencing" class="section level3">
<h3>Backreferencing</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;([:alpha:]).+?</span><span class="sc">\\</span><span class="st">1&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;A small sentence. - 2. A&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a><span class="fu">str_extract</span>(example.obj, <span class="st">&quot;(</span><span class="sc">\\</span><span class="st">b[a-z]+</span><span class="sc">\\</span><span class="st">b).+?</span><span class="sc">\\</span><span class="st">1&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;sentence. - 2. Another tiny sentence&quot;</code></pre>
<p>Do you think you’ve mastered regular expressions? Maybe <a
href="http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address/201378#201378">think
again</a>. 🤯</p>
</div>
</div>

&nbsp;
<hr />
<p style="text-align: center;">A work by Lisa Oswald & Tom Arend</a></p>
<p style="text-align: center;"><span style="color: #808080;"><em>Prepared for Intro to Data Science, taught by Simon Munzert</em></span></p>
<p style="text-align: center;"><span style="color: #808080;"><em><a href="https://www.hertie-school.org/en/">Hertie School, Berlin</em></span></p>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" >

<!-- Add font awesome icons -->
<p style="text-align: center;">
    <a href="https://github.com/intro-to-data-science-23"  <i class="fab fa-github"></i><a>
</p>

&nbsp;


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
